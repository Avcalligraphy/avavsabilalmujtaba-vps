---
import { Image } from "@astrojs/image/components";
import PortfolioHeader from "./PortfolioHeader.astro";
import PortfolioList from "./PortfolioList.astro";

---

<section id="portfolio" class="relative overflow-hidden">
  <!-- Ournament at Top -->
  <Image
    format="webp"
    class="pointer-events-none bg-1 opacity-0 absolute -left-4 -right-4 top-[-30px] z-0 mx-auto scale-[350%] sm:scale-150 xl:scale-105"
    src="/images/work-experiences-ournament.png"
    width="1406"
    height="1052"
    loading="lazy"
    alt=""
  />

  <!-- Ournament at Bottom -->
  <Image
    format="webp"
    class="pointer-events-none bg-2 opacity-0 absolute inset-x-0 -bottom-5 z-0 mx-auto 2xl:scale-[120%]"
    src="/images/writings-ournament-bottom.png"
    width="1406"
    height="1052"
    loading="lazy"
    alt=""
  />

  <div class="px-5 pt-12 sm:pt-[14rem] lg:mb-40 mb-10 ">
    <PortfolioHeader />
    <PortfolioList />


  </div>
</section>

<script>
  import {
animate,
glide,
inView,
} from "https://cdn.skypack.dev/pin/motion@v10.14.2-LJwQD7W51KHV0ZIF3ZRz/mode=imports,min/optimized/motion.js";

  const defaultEasing = [0.17, 0.55, 0.55, 1];

  inView("#portfolio .title-highlight", (el) => {
    animate("#portfolio .title-highlight", { maxWidth: "100%" }, { duration: 0.4, delay: 0.3 });
    animate("#portfolio .bg-1", { opacity: 1 }, { delay: 0.4 });
  });

  inView("#portfolio .bg-2", () => {
    animate("#portfolio .bg-2", { opacity: 1 }, { duration: 1 });
  });

  document.querySelectorAll("#portfolio .writing-list-item").forEach((item, i) => {
    inView(item, (el) => {
      animate(
        item,
        { y: -100, opacity: 1 },
        {
          duration: 0.3,
          delay: 0.1 + i / 10,
          easing: glide({ velocity: -100, max: 0 }),
        }
      );
    });
  });
</script>

<style>
  section {
    background: linear-gradient(181.32deg, rgba(5, 31, 46, 0.53) 1.13%, rgba(0, 0, 0, 0) 34%), #091f2a;
  }

  section::before {
    content: "";
    pointer-events: none;
    user-select: none;
    position: absolute;
    inset: 0px;
    border-radius: inherit;
    padding-top: 3px;
    background: linear-gradient(90deg, hsla(200, 98%, 39%, 1) 0%, rgba(217, 217, 217, 0) 66.89%);
    content: "";
    pointer-events: none;
    user-select: none;
    position: absolute;
    border-radius: inherit;
    -webkit-mask: linear-gradient(black, black) content-box content-box, linear-gradient(black, black);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
  }
</style>
